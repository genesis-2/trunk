<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="scripts" name="GenesisII.scripts">

	<target name="container-script.win" if="windows.scripts">
		<copy file="${scripts.dir}/runContainer.bat"
			tofile="${basedir}/runContainer.bat"/>
		<replace file="${basedir}/runContainer.bat"
			token="$INSTALL_PATH" value="${basedir}" summary="yes"/>
	</target>

	<target name="container-script.unix" if="unix.scripts">
		<copy file="${scripts.dir}/runContainer.sh"
			tofile="${basedir}/runContainer.sh"/>
		<replace file="${basedir}/runContainer.sh"
			token="%{INSTALL_PATH}" value="${basedir}" summary="yes"/>
		<chmod file="${basedir}/runContainer.sh" perm="755"/>
	</target>

	<target name="grid-script.win" if="windows.scripts">
		<copy file="${scripts.dir}/grid.bat"
			tofile="${basedir}/grid.bat"/>
		<replace file="${basedir}/grid.bat"
			token="$INSTALL_PATH" value="${basedir}" summary="yes"/>
	</target>

	<target name="grid-script.unix" if="unix.scripts">
		<copy file="${scripts.dir}/grid"
			tofile="${basedir}/grid"/>
		<replace file="${basedir}/grid"
			token="%{INSTALL_PATH}" value="${basedir}" summary="yes"/>
		<chmod file="${basedir}/grid" perm="755"/>
	</target>

	<target name="cert-tool-script.win" if="windows.scripts">
		<copy file="${scripts.dir}/cert-tool.bat"
			tofile="${basedir}/cert-tool.bat"/>
		<replace file="${basedir}/cert-tool.bat"
			token="$INSTALL_PATH" value="${basedir}" summary="yes"/>
	</target>

	<target name="cert-tool-script.unix" if="unix.scripts">
		<copy file="${scripts.dir}/cert-tool"
			tofile="${basedir}/cert-tool"/>
		<replace file="${basedir}/cert-tool"
			token="%{INSTALL_PATH}" value="${basedir}" summary="yes"/>
		<chmod file="${basedir}/cert-tool" perm="755"/>
	</target>

	<target name="container-script"
		depends="container-script.win,container-script.unix"/>
	<target name="grid-script"
		depends="grid-script.win,grid-script.unix"/>
	<target name="cert-tool-script"
		depends="cert-tool-script.win,cert-tool-script.unix"/>

	<target name="scripts">
		<condition property="unix.scripts">
			<os family="unix"/>
		</condition>
		<condition property="windows.scripts">
			<os family="windows"/>
		</condition>

		<copy file="${scripts.dir}/jar-desc.xml"
			tofile="${basedir}/jar-desc.xml"/>
		<replace file="${basedir}/jar-desc.xml"
			token="$INSTALL_PATH" value="${basedir}" summary="yes"/>

		<antcall target="container-script"/>
		<antcall target="grid-script"/>
		<antcall target="cert-tool-script"/>
	</target>

</project>
